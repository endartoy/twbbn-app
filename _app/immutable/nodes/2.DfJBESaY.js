import"../chunks/DsnmJJEf.js";import{a as ot,d as ct,b as ut,s as vt}from"../chunks/DKB8PMpI.js";import{h as X,l as ft,k as dt,am as a,aw as _t,r as ht,H as gt,m as Fe,o as Se,u as me,B as ne,T as mt,Y as pt,w as xe,y as bt,x as re,a1 as Be,M as wt,v as Et,aG as yt,aK as Ne,aL as xt,z as qe,A as Lt,aM as Rt,aN as pe,aO as Ve,aP as $t,aQ as At,W as Mt,aR as Tt,a0 as It,aS as kt,P as Ze,E as Dt,aT as Ct,aU as Ut,C as Ft,F as Ge,aV as St,aW as Ke,aX as Nt,G as Ot,n as ie,aY as Je,D as Qe,ai as Yt,aZ as Xt,p as Ht,a7 as Oe,ay as m,aH as F,j as Q,f as zt,e as J,i as Pt,as as Y,aI as Wt,aq as M,ar as T,t as oe}from"../chunks/BSMBz9JT.js";import{i as le,b as be}from"../chunks/Depo6tsq.js";import{s as ce,r as Ye}from"../chunks/DEmNfico.js";function Bt(e,t,r){for(var i=e.items,n=[],l=t.length,c=0;c<l;c++)Tt(t[c].e,n,!0);var v=l>0&&n.length===0&&r!==null;if(v){var _=r.parentNode;It(_),_.append(r),i.clear(),W(e,t[0].prev,t[l-1].next)}kt(n,()=>{for(var h=0;h<l;h++){var u=t[h];v||(i.delete(u.k),W(e,u.prev,u.next)),Ve(u.e,!v)}})}function qt(e,t,r,i,n,l=null){var c=e,v={flags:t,items:new Map,first:null};X&&ft();var _=null,h=!1,u=new Map,w=_t(()=>{var o=r();return wt(o)?o:o==null?[]:Be(o)}),f,E;function d(){Vt(E,f,v,u,c,n,t,i,r),l!==null&&(f.length===0?_?qe(_):_=xe(()=>l(c)):_!==null&&Lt(_,()=>{_=null}))}dt(()=>{E??=Ze,f=a(w);var o=f.length;if(h&&o===0)return;h=o===0;let L=!1;if(X){var $=ht(c)===gt;$!==(o===0)&&(c=Fe(),Se(c),me(!1),L=!0)}if(X){for(var I=null,b,R=0;R<o;R++){if(ne.nodeType===mt&&ne.data===pt){c=ne,L=!0,me(!1);break}var k=f[R],C=i(k,R);b=Le(ne,v,I,null,k,C,R,n,t,r),v.items.set(C,b),I=b}o>0&&Se(Fe())}if(X)o===0&&l&&(_=xe(()=>l(c)));else if(bt()){var H=new Set,N=re;for(R=0;R<o;R+=1){k=f[R],C=i(k,R);var U=v.items.get(C)??u.get(C);U?je(U,k,R):(b=Le(null,v,null,null,k,C,R,n,t,r,!0),u.set(C,b)),H.add(C)}for(const[Z,x]of v.items)H.has(Z)||N.skipped_effects.add(x.e);N.add_callback(d)}else d();L&&me(!0),a(w)}),X&&(c=ne)}function Vt(e,t,r,i,n,l,c,v,_){var h=t.length,u=r.items,w=r.first,f=w,E,d=null,o=[],L=[],$,I,b,R;for(R=0;R<h;R+=1){if($=t[R],I=v($,R),b=u.get(I),b===void 0){var k=i.get(I);if(k!==void 0){i.delete(I),u.set(I,k);var C=d?d.next:f;W(r,d,k),W(r,k,C),we(k,C,n),d=k}else{var H=f?f.e.nodes_start:n;d=Le(H,r,d,d===null?r.first:d.next,$,I,R,l,c,_)}u.set(I,d),o=[],L=[],f=d.next;continue}if(je(b,$,R),(b.e.f&pe)!==0&&qe(b.e),b!==f){if(E!==void 0&&E.has(b)){if(o.length<L.length){var N=L[0],U;d=N.prev;var Z=o[0],x=o[o.length-1];for(U=0;U<o.length;U+=1)we(o[U],N,n);for(U=0;U<L.length;U+=1)E.delete(L[U]);W(r,Z.prev,x.next),W(r,d,Z),W(r,x,N),f=N,d=x,R-=1,o=[],L=[]}else E.delete(b),we(b,f,n),W(r,b.prev,b.next),W(r,b,d===null?r.first:d.next),W(r,d,b),d=b;continue}for(o=[],L=[];f!==null&&f.k!==I;)(f.e.f&pe)===0&&(E??=new Set).add(f),L.push(f),f=f.next;if(f===null)continue;b=f}o.push(b),d=b,f=b.next}if(f!==null||E!==void 0){for(var D=E===void 0?[]:Be(E);f!==null;)(f.e.f&pe)===0&&D.push(f),f=f.next;var G=D.length;if(G>0){var fe=null;Bt(r,D,fe)}}e.first=r.first&&r.first.e,e.last=d&&d.e;for(var se of i.values())Ve(se.e);i.clear()}function je(e,t,r,i){xt(e.v,t),e.i=r}function Le(e,t,r,i,n,l,c,v,_,h,u){var w=(_&$t)!==0,f=(_&At)===0,E=w?f?yt(n,!1,!1):Ne(n):n,d=(_&Rt)===0?c:Ne(c),o={i:d,v:E,k:l,a:null,e:null,prev:r,next:i};try{if(e===null){var L=document.createDocumentFragment();L.append(e=Et())}return o.e=xe(()=>v(e,E,d,h),X),o.e.prev=r&&r.e,o.e.next=i&&i.e,r===null?u||(t.first=o):(r.next=o,r.e.next=o.e),i!==null&&(i.prev=o,i.e.prev=o.e),o}finally{}}function we(e,t,r){for(var i=e.next?e.next.e.nodes_start:r,n=t?t.e.nodes_start:r,l=e.e.nodes_start;l!==null&&l!==i;){var c=Mt(l);n.before(l),l=c}}function W(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}const Xe=[...` 	
\r\fÂ \v\uFEFF`];function Zt(e,t,r){var i=e==null?"":""+e;if(r){for(var n in r)if(r[n])i=i?i+" "+n:n;else if(i.length)for(var l=n.length,c=0;(c=i.indexOf(n,c))>=0;){var v=c+l;(c===0||Xe.includes(i[c-1]))&&(v===i.length||Xe.includes(i[v]))?i=(c===0?"":i.substring(0,c))+i.substring(v+1):c=v}}return i===""?null:i}function Gt(e,t){return e==null?null:String(e)}function He(e,t,r,i,n,l){var c=e.__className;if(X||c!==r||c===void 0){var v=Zt(r,i,l);(!X||v!==e.getAttribute("class"))&&(v==null?e.removeAttribute("class"):e.className=v),e.__className=r}else if(l&&n!==l)for(var _ in l){var h=!!l[_];(n==null||h!==!!n[_])&&e.classList.toggle(_,h)}return l}function Kt(e,t,r,i){var n=e.__style;if(X||n!==t){var l=Gt(t);(!X||l!==e.getAttribute("style"))&&(l==null?e.removeAttribute("style"):e.style.cssText=l),e.__style=t}return i}const Jt=()=>performance.now(),V={tick:e=>requestAnimationFrame(e),now:()=>Jt(),tasks:new Set};function et(){const e=V.now();V.tasks.forEach(t=>{t.c(e)||(V.tasks.delete(t),t.f())}),V.tasks.size!==0&&V.tick(et)}function Qt(e){let t;return V.tasks.size===0&&V.tick(et),{promise:new Promise(r=>{V.tasks.add(t={c:e,f:r})}),abort(){V.tasks.delete(t)}}}function ue(e,t){Ke(()=>{e.dispatchEvent(new CustomEvent(t))})}function jt(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function ze(e){const t={},r=e.split(";");for(const i of r){const[n,l]=i.split(":");if(!n||l===void 0)break;const c=jt(n.trim());t[c]=l.trim()}return t}const ea=e=>e;function ae(e,t,r,i){var n=(e&St)!==0,l="both",c,v=t.inert,_=t.style.overflow,h,u;function w(){return Ke(()=>c??=r()(t,i?.()??{},{direction:l}))}var f={is_global:n,in(){t.inert=v,ue(t,"introstart"),h=Re(t,w(),u,1,()=>{ue(t,"introend"),h?.abort(),h=c=void 0,t.style.overflow=_})},out(L){t.inert=!0,ue(t,"outrostart"),u=Re(t,w(),h,0,()=>{ue(t,"outroend"),L?.()})},stop:()=>{h?.abort(),u?.abort()}},E=Ze;if((E.transitions??=[]).push(f),ot){var d=n;if(!d){for(var o=E.parent;o&&(o.f&Dt)!==0;)for(;(o=o.parent)&&(o.f&Ct)===0;);d=!o||(o.f&Ut)!==0}d&&Ft(()=>{Ge(()=>f.in())})}}function Re(e,t,r,i,n){var l=i===1;if(Nt(t)){var c,v=!1;return Ot(()=>{if(!v){var L=t({direction:l?"in":"out"});c=Re(e,L,r,i,n)}}),{abort:()=>{v=!0,c?.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r?.deactivate(),!t?.duration)return n(),{abort:ie,deactivate:ie,reset:ie,t:()=>i};const{delay:_=0,css:h,tick:u,easing:w=ea}=t;var f=[];if(l&&r===void 0&&(u&&u(0,1),h)){var E=ze(h(0,1));f.push(E,E)}var d=()=>1-i,o=e.animate(f,{duration:_,fill:"forwards"});return o.onfinish=()=>{o.cancel();var L=r?.t()??1-i;r?.abort();var $=i-L,I=t.duration*Math.abs($),b=[];if(I>0){var R=!1;if(h)for(var k=Math.ceil(I/16.666666666666668),C=0;C<=k;C+=1){var H=L+$*w(C/k),N=ze(h(H,1-H));b.push(N),R||=N.overflow==="hidden"}R&&(e.style.overflow="hidden"),d=()=>{var U=o.currentTime;return L+$*w(U/I)},u&&Qt(()=>{if(o.playState!=="running")return!1;var U=d();return u(U,1-U),!0})}o=e.animate(b,{duration:I,fill:"forwards"}),o.onfinish=()=>{d=()=>i,u?.(i,1-i),n()}},{abort:()=>{o&&(o.cancel(),o.effect=null,o.onfinish=ie)},deactivate:()=>{n=ie},reset:()=>{i===0&&u?.(1,0)},t:()=>d()}}function Pe(e,t,r=t){var i=new WeakSet;Je(e,"input",async n=>{var l=n?e.defaultValue:e.value;if(l=Ee(e)?ye(l):l,r(l),re!==null&&i.add(re),await Yt(),l!==(l=t())){var c=e.selectionStart,v=e.selectionEnd;e.value=l??"",v!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(v,e.value.length))}}),(X&&e.defaultValue!==e.value||Ge(t)==null&&e.value)&&(r(Ee(e)?ye(e.value):e.value),re!==null&&i.add(re)),Qe(()=>{var n=t();if(e===document.activeElement){var l=Xt??re;if(i.has(l))return}Ee(e)&&n===ye(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Ee(e){var t=e.type;return t==="number"||t==="range"}function ye(e){return e===""?null:+e}function ta(e,t,r=t){Je(e,"change",()=>{r(e.files)}),X&&e.files&&r(e.files),Qe(()=>{e.files=t()})}const aa=e=>e;function ra(e){const t=e-1;return t*t*t+1}function ve(e,{delay:t=0,duration:r=400,easing:i=aa}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:i,css:l=>`opacity: ${l*n}`}}function We(e,{delay:t=0,duration:r=400,easing:i=ra,axis:n="y"}={}){const l=getComputedStyle(e),c=+l.opacity,v=n==="y"?"height":"width",_=parseFloat(l[v]),h=n==="y"?["top","bottom"]:["left","right"],u=h.map($=>`${$[0].toUpperCase()}${$.slice(1)}`),w=parseFloat(l[`padding${u[0]}`]),f=parseFloat(l[`padding${u[1]}`]),E=parseFloat(l[`margin${u[0]}`]),d=parseFloat(l[`margin${u[1]}`]),o=parseFloat(l[`border${u[0]}Width`]),L=parseFloat(l[`border${u[1]}Width`]);return{delay:t,duration:r,easing:i,css:$=>`overflow: hidden;opacity: ${Math.min($*20,1)*c};${v}: ${$*_}px;padding-${h[0]}: ${$*w}px;padding-${h[1]}: ${$*f}px;margin-${h[0]}: ${$*E}px;margin-${h[1]}: ${$*d}px;border-${h[0]}-width: ${$*o}px;border-${h[1]}-width: ${$*L}px;min-${v}: 0`}}const sa=""+new URL("../assets/image-.JfwN_-Fz.png",import.meta.url).href,na=""+new URL("../assets/0.d_JWpNXU.png",import.meta.url).href,ia=""+new URL("../assets/0_base.CX9uhL0v.png",import.meta.url).href,la=""+new URL("../assets/1.j6m7dKLN.png",import.meta.url).href,oa=""+new URL("../assets/1_base.BZovD6fU.png",import.meta.url).href,ca=(e,t,r,i)=>{m(t,null),m(r,1),m(i,0)},ua=(e,t,r,i,n,l)=>{if(a(t)){let c=!1;Promise.all([r(a(t).url),r(a(t).url_bg)]).then(([v,_])=>{const h=a(i).getContext("2d");if(!h)return;m(n,h,!0);const[u,w]=a(t).size;a(i).width=u,a(i).height=w,a(n).clearRect(0,0,u,w),a(n).drawImage(_,0,0,u,w),a(n).drawImage(a(l),0,0,u,w),a(n).drawImage(v,0,0,u,w)}).catch(v=>{c=!0,alert(v)}).finally(()=>{if(c)return;const v=new Date,_=w=>w.toString().padStart(2,"0"),h=`${v.getFullYear()}-${_(v.getMonth()+1)}-${_(v.getDate())}_${_(v.getHours())}-${_(v.getMinutes())}-${_(v.getSeconds())}`,u=document.createElement("a");u.download=`end-twbbn_${h}.png`,u.href=a(i).toDataURL("image/png"),u.click()})}};var va=(e,t,r)=>m(t,a(r),!0),fa=Q('<div><img class="svelte-1e7bg5l"/> <h4 class="title svelte-1e7bg5l"> </h4></div>'),da=Q('<div class="row"><div class="col-xs-12"><h2 class="text-center">PILIH FRAME</h2></div> <!></div>'),_a=Q("<canvas></canvas>"),ha=(e,t)=>a(t).click(),ga=Q('<img class="upload-plachoder svelte-1e7bg5l" alt="placaholder"/>'),ma=(e,t,r)=>{t(),a(r).click()},pa=Q('<div class="row"><fieldset class="col-xs-12"><label>ZOOM <input type="range" min="0.5" max="3" step="0.1"/></label></fieldset> <fieldset class="col-xs-12"><label>PUTAR <input type="range" min="-180" max="180" step="5"/></label></fieldset> <div class="col-xs-12 button-box svelte-1e7bg5l"><button class="button secondary svelte-1e7bg5l">UBAH FOTO</button></div></div>'),ba=Q('<div class="row middle-xs"><div class="col-xs-12 col-lg-6"><div class="crop-container svelte-1e7bg5l"><!> <img class="frame svelte-1e7bg5l" alt="frame material"/></div></div> <div class="col-xs-12 col-lg-6"><!> <div class="row"><div class="col-xs-12 button-box svelte-1e7bg5l"><button class="button secondary svelte-1e7bg5l">UBAH FRAME</button></div></div></div></div>'),wa=Q('<footer class="svelte-1e7bg5l"><div class="container svelte-1e7bg5l"><div class="row center-xs"><div class="col-xs-12 col-md-6 col-lg-4 button-box svelte-1e7bg5l"><button class="svelte-1e7bg5l">DOWNLOAD</button></div></div></div></footer>'),Ea=Q('<main class="container wrapper svelte-1e7bg5l"><!> <!></main> <!> <input type="file" accept="image/*" class="input-image svelte-1e7bg5l" required/> <canvas class="image-final svelte-1e7bg5l"></canvas>',1);function Aa(e,t){Ht(t,!0);const r=!0,i=[{title:"SQUARE",url:na,url_bg:ia,size:[900,900]},{title:"POTRAIT",url:la,url_bg:oa,size:[900,1200]}];let n=F(null),l=F(null),c=F(null),v,_=Wt(()=>{if(a(l)&&a(l)?.[0]){let s=URL.createObjectURL(a(l)[0]);return URL.revokeObjectURL(v),v=s,s}else return null});const h=()=>{m(l,new DataTransfer().files,!0),m(D,1),m(G,0)};let u=F(!1),w=F(0),f=F(0),E=F(0),d=F(0),o=F(0);Oe(()=>{a(x)&&(a(x).addEventListener("mousedown",s=>{L(s)}),a(x).addEventListener("mousemove",s=>{$(s)}),a(x).addEventListener("mouseup",I),a(x).addEventListener("wheel",s=>{H(s)}),a(x).addEventListener("touchstart",s=>{R(s)}),a(x).addEventListener("touchmove",s=>{k(s)},{passive:!1}),a(x).addEventListener("touchend",C))});const L=s=>{m(u,!0),m(E,s.clientX,!0),m(d,s.clientY,!0)},$=s=>{if(!a(u))return;s.preventDefault();const g=s.clientX-a(E),p=s.clientY-a(d);m(w,a(w)+g),m(f,a(f)+p),m(E,s.clientX,!0),m(d,s.clientY,!0)},I=()=>{m(u,!1)},b=s=>{const[g,p]=[s[0],s[1]],y=p.clientX-g.clientX,A=p.clientY-g.clientY;return Math.sqrt(y*y+A*A)},R=s=>{if(m(u,!0),s.touches.length===2)m(o,b(s.touches),!0);else{const g=s.touches[0];m(E,g.clientX,!0),m(d,g.clientY,!0)}},k=s=>{if(a(u))if(s.preventDefault(),s.touches.length===2){const g=b(s.touches),p=g/a(o);p>1.05?(m(D,Math.min(5,a(D)+.1),!0),m(o,g,!0)):p<.95&&(m(D,Math.max(.5,a(D)-.1),!0),m(o,g,!0))}else{const g=s.touches[0],p=g.clientX-a(E),y=g.clientY-a(d);m(w,a(w)+p),m(f,a(f)+y),m(E,g.clientX,!0),m(d,g.clientY,!0)}},C=()=>{m(u,!1)},H=s=>{s.preventDefault(),Math.sign(s.deltaY)>0?m(D,Math.max(.5,a(D)-.1),!0):m(D,Math.max(.5,a(D)+.1),!0)},N=s=>new Promise((g,p)=>{const y=new Image;y.onload=()=>g(y),y.onerror=()=>p(new Error(`Failed to load image: ${s}`)),y.src=s}),U=(s,g)=>{const p=document.createElement("canvas"),y=p.getContext("2d"),A=g*Math.PI/180;return g%180===0?(p.width=s.width,p.height=s.height):(p.width=s.height,p.height=s.width),y.translate(p.width/2,p.height/2),y.rotate(A),y.drawImage(s,-s.width/2,-s.height/2),p};let Z=F(null),x=F(null),D=F(1),G=F(0);Oe(()=>{a(n)?.url&&a(_)&&a(D)&&a(w)!==null&&a(f)!==null&&a(G)!==null&&N(a(_)).then(s=>{const g=a(x).getContext("2d");if(!g)return;m(Z,g,!0);const p=U(s,a(G)),[y,A]=a(n).size;a(x).width=y,a(x).height=A,a(Z).clearRect(0,0,y,A);const O=y/A,j=p.width/p.height;let B,K,z,q;j>O?(q=p.height/a(D),z=q*O):(z=p.width/a(D),q=z/O),B=(p.width-z)/2,K=(p.height-q)/2,a(Z).drawImage(p,B,K,z,q,a(w),a(f),y,A)}).catch(s=>{console.error(s)})});let fe=F(null),se=F(null);ut(()=>{a(x)&&(a(x).removeEventListener("mousedown",s=>{L(s)}),a(x).removeEventListener("mousemove",s=>{$(s)}),a(x).removeEventListener("mouseup",I),a(x).removeEventListener("wheel",s=>{H(s)}),a(x).removeEventListener("touchstart",s=>{R(s)}),a(x).removeEventListener("touchmove",s=>{k(s)}),a(x).removeEventListener("touchend",C))});var $e=Ea(),de=zt($e),Ae=M(de);{var tt=s=>{var g=da(),p=Y(M(g),2);qt(p,17,()=>i,y=>y.title,(y,A)=>{var O=fa();let j;O.__click=[va,n,A];var B=M(O),K=Y(B,2),z=M(K,!0);T(K),T(O),oe(q=>{j=He(O,1,"col-xs-6 col-md-6 col-lg-4 box svelte-1e7bg5l",null,j,q),ce(B,"src",a(A).url),ce(B,"alt",a(A).title),vt(z,a(A).title)},[()=>({selected:a(n)?.url===a(A)?.url})]),J(y,O)}),T(g),ae(3,g,()=>We,()=>({delay:60})),J(s,g)};le(Ae,s=>{a(n)||s(tt)})}var at=Y(Ae,2);{var rt=s=>{var g=ba(),p=M(g),y=M(p),A=M(y);{var O=P=>{var S=_a();let ee;be(S,te=>m(x,te),()=>a(x)),oe(te=>ee=He(S,1,"canvas svelte-1e7bg5l",null,ee,te),[()=>({isDrag:a(u)})]),ae(3,S,()=>ve,()=>({delay:60})),J(P,S)},j=P=>{var S=ga();S.__click=[ha,c],oe(()=>ce(S,"src",sa)),ae(3,S,()=>ve,()=>({delay:60})),J(P,S)};le(A,P=>{a(_)?P(O):P(j,!1)})}var B=Y(A,2);T(y),T(p);var K=Y(p,2),z=M(K);{var q=P=>{var S=pa(),ee=M(S),te=M(ee),ke=Y(M(te));Ye(ke),T(te),T(ee);var he=Y(ee,2),De=M(he),Ce=Y(M(De));Ye(Ce),T(De),T(he);var Ue=Y(he,2),lt=M(Ue);lt.__click=[ma,h,c],T(Ue),T(S),Pe(ke,()=>a(D),ge=>m(D,ge)),Pe(Ce,()=>a(G),ge=>m(G,ge)),ae(3,S,()=>We,()=>({delay:60})),J(P,S)};le(z,P=>{a(_)&&P(q)})}var Te=Y(z,2),Ie=M(Te),it=M(Ie);it.__click=[ca,n,D,G],T(Ie),T(Te),T(K),T(g),oe(()=>{Kt(y,`aspect-ratio: ${a(n).size[0]}/${a(n).size[1]};`),ce(B,"src",a(n).url)}),ae(3,B,()=>ve,()=>({delay:60})),J(s,g)};le(at,s=>{a(n)&&s(rt)})}T(de);var Me=Y(de,2);{var st=s=>{var g=wa(),p=M(g),y=M(p),A=M(y),O=M(A);O.__click=[ua,n,N,se,fe,x],T(A),T(y),T(p),T(g),ae(3,g,()=>ve,()=>({delay:60})),J(s,g)};le(Me,s=>{a(n)&&a(_)&&s(st)})}var _e=Y(Me,2);be(_e,s=>m(c,s),()=>a(c));var nt=Y(_e,2);return be(nt,s=>m(se,s),()=>a(se)),ta(_e,()=>a(l),s=>m(l,s)),J(e,$e),Pt({prerender:r})}ct(["click"]);export{Aa as component};
