import"../chunks/DsnmJJEf.js";import{a as et}from"../chunks/B2sZKSvF.js";import{h as k,f as tt,c as at,a as e,av as lt,i as rt,H as st,j as Ne,k as Oe,l as _e,z as re,aI as nt,aJ as it,p as xe,w as ot,v as ae,aK as ze,G as ct,o as vt,m as ut,aL as Xe,aM as dt,x as Pe,y as ft,aN as ht,aO as me,aP as Be,aQ as _t,aR as mt,aS as gt,aT as bt,aU as wt,aV as pt,ak as Et,aW as We,r as Fe,V as xt,u as Lt,aX as Rt,aY as yt,ab as It,B as ge,b as c,aE as S,X as Q,Z as Mt,$ as K,ac as Dt,a4 as C,a2 as I,a3 as M,a1 as ie,ad as At}from"../chunks/CXf8lD5I.js";import{i as se}from"../chunks/DOmrgE74.js";import{l as ne,t as te,a as Ye,s as oe,f as ce,r as Ce}from"../chunks/C5dJEZHt.js";import{b as be}from"../chunks/A9dlLIIu.js";function Ut(t,s,l){for(var r=t.items,n=[],i=s.length,v=0;v<i;v++)bt(s[v].e,n,!0);var d=i>0&&n.length===0&&l!==null;if(d){var _=l.parentNode;wt(_),_.append(l),r.clear(),V(t,s[0].prev,s[i-1].next)}pt(n,()=>{for(var y=0;y<i;y++){var g=s[y];d||(r.delete(g.k),V(t,g.prev,g.next)),Be(g.e,!d)}})}function Tt(t,s,l,r,n,i=null){var v=t,d={flags:s,items:new Map,first:null};k&&tt();var _=null,y=!1,g=new Map,L=lt(()=>{var h=l();return ct(h)?h:h==null?[]:ze(h)}),f,R;function m(){St(R,f,d,g,v,n,s,r,l),i!==null&&(f.length===0?_?Pe(_):_=xe(()=>i(v)):_!==null&&ft(_,()=>{_=null}))}at(()=>{R??=Et,f=e(L);var h=f.length;if(y&&h===0)return;y=h===0;let A=!1;if(k){var Z=rt(v)===st;Z!==(h===0)&&(v=Ne(),Oe(v),_e(!1),A=!0)}if(k){for(var N=null,p,E=0;E<h;E++){if(re.nodeType===nt&&re.data===it){v=re,A=!0,_e(!1);break}var U=f[E],O=r(U,E);p=Le(re,d,N,null,U,O,E,n,s,l),d.items.set(O,p),N=p}h>0&&Oe(Ne())}if(k)h===0&&i&&(_=xe(()=>i(v)));else if(ot()){var G=new Set,P=ae;for(E=0;E<h;E+=1){U=f[E],O=r(U,E);var Y=d.items.get(O)??g.get(O);Y?Ve(Y,U,E):(p=Le(null,d,null,null,U,O,E,n,s,l,!0),g.set(O,p)),G.add(O)}for(const[q,w]of d.items)G.has(q)||P.skipped_effects.add(w.e);P.add_callback(m)}else m();A&&_e(!0),e(L)}),k&&(v=re)}function St(t,s,l,r,n,i,v,d,_){var y=s.length,g=l.items,L=l.first,f=L,R,m=null,h=[],A=[],Z,N,p,E;for(E=0;E<y;E+=1){if(Z=s[E],N=d(Z,E),p=g.get(N),p===void 0){var U=r.get(N);if(U!==void 0){r.delete(N),g.set(N,U);var O=m?m.next:f;V(l,m,U),V(l,U,O),we(U,O,n),m=U}else{var G=f?f.e.nodes_start:n;m=Le(G,l,m,m===null?l.first:m.next,Z,N,E,i,v,_)}g.set(N,m),h=[],A=[],f=m.next;continue}if(Ve(p,Z,E),(p.e.f&me)!==0&&Pe(p.e),p!==f){if(R!==void 0&&R.has(p)){if(h.length<A.length){var P=A[0],Y;m=P.prev;var q=h[0],w=h[h.length-1];for(Y=0;Y<h.length;Y+=1)we(h[Y],P,n);for(Y=0;Y<A.length;Y+=1)R.delete(A[Y]);V(l,q.prev,w.next),V(l,m,q),V(l,w,P),f=P,m=w,E-=1,h=[],A=[]}else R.delete(p),we(p,f,n),V(l,p.prev,p.next),V(l,p,m===null?l.first:m.next),V(l,m,p),m=p;continue}for(h=[],A=[];f!==null&&f.k!==N;)(f.e.f&me)===0&&(R??=new Set).add(f),A.push(f),f=f.next;if(f===null)continue;p=f}h.push(p),m=p,f=p.next}if(f!==null||R!==void 0){for(var D=R===void 0?[]:ze(R);f!==null;)(f.e.f&me)===0&&D.push(f),f=f.next;var J=D.length;if(J>0){var ve=null;Ut(l,D,ve)}}t.first=l.first&&l.first.e,t.last=m&&m.e;for(var le of r.values())Be(le.e);r.clear()}function Ve(t,s,l,r){dt(t.v,s),t.i=l}function Le(t,s,l,r,n,i,v,d,_,y,g){var L=(_&_t)!==0,f=(_&mt)===0,R=L?f?ut(n,!1,!1):Xe(n):n,m=(_&ht)===0?v:Xe(v),h={i:m,v:R,k:i,a:null,e:null,prev:l,next:r};try{if(t===null){var A=document.createDocumentFragment();A.append(t=vt())}return h.e=xe(()=>d(t,R,m,y),k),h.e.prev=l&&l.e,h.e.next=r&&r.e,l===null?g||(s.first=h):(l.next=h,l.e.next=h.e),r!==null&&(r.prev=h,r.e.prev=h.e),h}finally{}}function we(t,s,l){for(var r=t.next?t.next.e.nodes_start:l,n=s?s.e.nodes_start:l,i=t.e.nodes_start;i!==null&&i!==r;){var v=gt(i);n.before(i),i=v}}function V(t,s,l){s===null?t.first=l:(s.next=l,s.e.next=l&&l.e),l!==null&&(l.prev=s,l.e.prev=s&&s.e)}const ke=[...` 	
\r\fÂ \v\uFEFF`];function Nt(t,s,l){var r=t==null?"":""+t;if(l){for(var n in l)if(l[n])r=r?r+" "+n:n;else if(r.length)for(var i=n.length,v=0;(v=r.indexOf(n,v))>=0;){var d=v+i;(v===0||ke.includes(r[v-1]))&&(d===r.length||ke.includes(r[d]))?r=(v===0?"":r.substring(0,v))+r.substring(d+1):v=d}}return r===""?null:r}function Ot(t,s){return t==null?null:String(t)}function He(t,s,l,r,n,i){var v=t.__className;if(k||v!==l||v===void 0){var d=Nt(l,r,i);(!k||d!==t.getAttribute("class"))&&(d==null?t.removeAttribute("class"):t.className=d),t.__className=l}else if(i&&n!==i)for(var _ in i){var y=!!i[_];(n==null||y!==!!n[_])&&t.classList.toggle(_,y)}return i}function Xt(t,s,l,r){var n=t.__style;if(k||n!==s){var i=Ot(s);(!k||i!==t.getAttribute("style"))&&(i==null?t.removeAttribute("style"):t.style.cssText=i),t.__style=s}return r}function $e(t,s,l=s){var r=new WeakSet;We(t,"input",async n=>{var i=n?t.defaultValue:t.value;if(i=pe(t)?Ee(i):i,l(i),ae!==null&&r.add(ae),await xt(),i!==(i=s())){var v=t.selectionStart,d=t.selectionEnd;t.value=i??"",d!==null&&(t.selectionStart=v,t.selectionEnd=Math.min(d,t.value.length))}}),(k&&t.defaultValue!==t.value||Lt(s)==null&&t.value)&&(l(pe(t)?Ee(t.value):t.value),ae!==null&&r.add(ae)),Fe(()=>{var n=s();if(t===document.activeElement){var i=Rt??ae;if(r.has(i))return}pe(t)&&n===Ee(t.value)||t.type==="date"&&!n&&!t.value||n!==t.value&&(t.value=n??"")})}function pe(t){var s=t.type;return s==="number"||s==="range"}function Ee(t){return t===""?null:+t}function Yt(t,s,l=s){We(t,"change",()=>{l(t.files)}),k&&t.files&&l(t.files),Fe(()=>{t.files=s()})}const Ct=""+new URL("../assets/image-.JfwN_-Fz.png",import.meta.url).href,kt=""+new URL("../assets/0.d_JWpNXU.png",import.meta.url).href,Ht=""+new URL("../assets/0_base.CX9uhL0v.png",import.meta.url).href,$t=""+new URL("../assets/1.j6m7dKLN.png",import.meta.url).href,zt=""+new URL("../assets/1_base.BZovD6fU.png",import.meta.url).href,Pt=(t,s,l,r)=>{c(s,null),c(l,1),c(r,0)},Bt=(t,s,l,r,n,i)=>{if(e(s)){let v=!1;ne.show(),Promise.all([l(e(s).url),l(e(s).url_bg)]).then(([d,_])=>{const y=e(r).getContext("2d");if(!y)return;c(n,y,!0);const[g,L]=e(s).size;e(r).width=g,e(r).height=L,e(n).clearRect(0,0,g,L),e(n).drawImage(_,0,0,g,L),e(n).drawImage(e(i),0,0,g,L),e(n).drawImage(d,0,0,g,L)}).catch(d=>{v=!0,alert(d)}).finally(()=>{if(v)return;const d=new Date,_=L=>L.toString().padStart(2,"0"),y=`${d.getFullYear()}-${_(d.getMonth()+1)}-${_(d.getDate())}_${_(d.getHours())}-${_(d.getMinutes())}-${_(d.getSeconds())}`,g=document.createElement("a");g.download=`end-twbbn_${y}.png`,g.href=e(r).toDataURL("image/png"),g.click(),ne.hide()})}};var Wt=(t,s,l)=>c(s,e(l),!0),Ft=Q('<div><img class="svelte-1e7bg5l"/> <h4 class="title svelte-1e7bg5l"> </h4></div>'),Vt=Q('<div class="row"><div class="col-xs-12"><h2 class="text-center">PILIH FRAME</h2></div> <!></div>'),Zt=Q("<canvas></canvas>"),qt=(t,s)=>e(s).click(),Jt=Q('<img class="upload-plachoder svelte-1e7bg5l" alt="placaholder"/>'),Kt=(t,s,l)=>{s(),e(l).click()},Qt=Q('<div class="row"><fieldset class="col-xs-12"><label>ZOOM <input type="range" min="0.5" max="3" step="0.1"/></label></fieldset> <fieldset class="col-xs-12"><label>PUTAR <input type="range" min="-180" max="180" step="5"/></label></fieldset> <div class="col-xs-12 button-box svelte-1e7bg5l"><button class="button secondary svelte-1e7bg5l">UBAH FOTO</button></div></div>'),Gt=Q('<div class="row middle-xs"><div class="col-xs-12 col-lg-6"><div class="crop-container svelte-1e7bg5l"><!> <img class="frame svelte-1e7bg5l" alt="frame material"/></div></div> <div class="col-xs-12 col-lg-6"><!> <div class="row"><div class="col-xs-12 button-box svelte-1e7bg5l"><button class="button secondary svelte-1e7bg5l">UBAH FRAME</button></div></div></div></div>'),jt=Q('<footer class="svelte-1e7bg5l"><div class="container svelte-1e7bg5l"><div class="row center-xs"><div class="col-xs-12 col-md-6 col-lg-4 button-box svelte-1e7bg5l"><button class="svelte-1e7bg5l">DOWNLOAD</button></div></div></div></footer>'),ea=Q('<main class="container wrapper svelte-1e7bg5l"><!> <!></main> <!> <input type="file" accept="image/*" class="input-image svelte-1e7bg5l" required/> <canvas class="image-final svelte-1e7bg5l"></canvas>',1);function ia(t,s){It(s,!0);const l=[{title:"SQUARE",url:kt,url_bg:Ht,size:[900,900]},{title:"POTRAIT",url:$t,url_bg:zt,size:[900,1200]}];let r=S(null),n=S(null),i=S(null),v;const d=async a=>{const o=await createImageBitmap(a),u=1024,b=u/o.width,x=u,T=o.height*b,H=document.createElement("canvas");H.width=x,H.height=T,H.getContext("2d").drawImage(o,0,0,x,T);const W=await new Promise(z=>H.toBlob(z,"image/jpeg",.7));return URL.createObjectURL(W)};let _=S(null);ge(()=>{e(n)&&e(n)?.[0]?(ne.show(),d(e(n)[0]).then(a=>{URL.revokeObjectURL(v),v=a,c(_,a,!0),ne.hide()}).catch(a=>{c(_,v,!0),ne.hide()})):c(_,null)});const y=()=>{c(n,new DataTransfer().files,!0),c(D,1),c(J,0)};let g=S(!1),L=S(0),f=S(0),R=S(0),m=S(0),h=S(0);ge(()=>{e(w)&&(e(w).addEventListener("mousedown",a=>{A(a)}),e(w).addEventListener("mousemove",a=>{Z(a)}),e(w).addEventListener("mouseup",N),e(w).addEventListener("wheel",a=>{G(a)}),e(w).addEventListener("touchstart",a=>{E(a)}),e(w).addEventListener("touchmove",a=>{U(a)},{passive:!1}),e(w).addEventListener("touchend",O))});const A=a=>{c(g,!0),c(R,a.clientX,!0),c(m,a.clientY,!0)},Z=a=>{if(!e(g))return;a.preventDefault();const o=a.clientX-e(R),u=a.clientY-e(m);c(L,e(L)+o),c(f,e(f)+u),c(R,a.clientX,!0),c(m,a.clientY,!0)},N=()=>{c(g,!1)},p=a=>{const[o,u]=[a[0],a[1]],b=u.clientX-o.clientX,x=u.clientY-o.clientY;return Math.sqrt(b*b+x*x)},E=a=>{if(c(g,!0),a.touches.length===2)c(h,p(a.touches),!0);else{const o=a.touches[0];c(R,o.clientX,!0),c(m,o.clientY,!0)}},U=a=>{if(e(g))if(a.preventDefault(),a.touches.length===2){const o=p(a.touches),u=o/e(h);u>1.05?(c(D,Math.min(5,e(D)+.1),!0),c(h,o,!0)):u<.95&&(c(D,Math.max(.5,e(D)-.1),!0),c(h,o,!0))}else{const o=a.touches[0],u=o.clientX-e(R),b=o.clientY-e(m);c(L,e(L)+u),c(f,e(f)+b),c(R,o.clientX,!0),c(m,o.clientY,!0)}},O=()=>{c(g,!1)},G=a=>{a.preventDefault(),Math.sign(a.deltaY)>0?c(D,Math.max(.5,e(D)-.1),!0):c(D,Math.max(.5,e(D)+.1),!0)},P=a=>new Promise((o,u)=>{const b=new Image;b.onload=()=>o(b),b.onerror=()=>u(new Error(`Failed to load image: ${a}`)),b.src=a}),Y=(a,o)=>{const u=document.createElement("canvas"),b=u.getContext("2d"),x=o*Math.PI/180;return o%180===0?(u.width=a.width,u.height=a.height):(u.width=a.height,u.height=a.width),b.translate(u.width/2,u.height/2),b.rotate(x),b.drawImage(a,-a.width/2,-a.height/2),u};let q=S(null),w=S(null),D=S(1),J=S(0);ge(()=>{e(r)?.url&&e(_)&&e(D)&&e(L)!==null&&e(f)!==null&&e(J)!==null&&P(e(_)).then(a=>{const o=e(w).getContext("2d");if(!o)return;c(q,o,!0);const u=Y(a,e(J)),[b,x]=e(r).size;e(w).width=b,e(w).height=x,e(q).clearRect(0,0,b,x);const T=b/x,H=u.width/u.height;let B,W,$,z;H>T?(z=u.height/e(D),$=z*T):($=u.width/e(D),z=$/T),B=(u.width-$)/2,W=(u.height-z)/2,e(q).drawImage(u,B,W,$,z,e(L),e(f),b,x)}).catch(a=>{console.error(a)})});let ve=S(null),le=S(null);et(()=>{e(w)&&(e(w).removeEventListener("mousedown",a=>{A(a)}),e(w).removeEventListener("mousemove",a=>{Z(a)}),e(w).removeEventListener("mouseup",N),e(w).removeEventListener("wheel",a=>{G(a)}),e(w).removeEventListener("touchstart",a=>{E(a)}),e(w).removeEventListener("touchmove",a=>{U(a)}),e(w).removeEventListener("touchend",O))});var Re=ea(),ue=Mt(Re),ye=I(ue);{var Ze=a=>{var o=Vt(),u=C(I(o),2);Tt(u,17,()=>l,b=>b.title,(b,x)=>{var T=Ft();let H;T.__click=[Wt,r,x];var B=I(T),W=C(B,2),$=I(W,!0);M(W),M(T),ie(z=>{H=He(T,1,"col-xs-6 col-md-6 col-lg-4 box svelte-1e7bg5l",null,H,z),oe(B,"src",e(x).url),oe(B,"alt",e(x).title),At($,e(x).title)},[()=>({selected:e(r)?.url===e(x)?.url})]),K(b,T)}),M(o),te(3,o,()=>Ye,()=>({delay:60})),K(a,o)};se(ye,a=>{e(r)||a(Ze)})}var qe=C(ye,2);{var Je=a=>{var o=Gt(),u=I(o),b=I(u),x=I(b);{var T=F=>{var X=Zt();let j;be(X,ee=>c(w,ee),()=>e(w)),ie(ee=>j=He(X,1,"canvas svelte-1e7bg5l",null,j,ee),[()=>({isDrag:e(g)})]),te(3,X,()=>ce,()=>({delay:60})),K(F,X)},H=F=>{var X=Jt();X.__click=[qt,i],ie(()=>oe(X,"src",Ct)),te(3,X,()=>ce,()=>({delay:60})),K(F,X)};se(x,F=>{e(_)?F(T):F(H,!1)})}var B=C(x,2);M(b),M(u);var W=C(u,2),$=I(W);{var z=F=>{var X=Qt(),j=I(X),ee=I(j),Ae=C(I(ee));Ce(Ae),M(ee),M(j);var fe=C(j,2),Ue=I(fe),Te=C(I(Ue));Ce(Te),M(Ue),M(fe);var Se=C(fe,2),je=I(Se);je.__click=[Kt,y,i],M(Se),M(X),$e(Ae,()=>e(D),he=>c(D,he)),$e(Te,()=>e(J),he=>c(J,he)),te(3,X,()=>Ye,()=>({delay:60})),K(F,X)};se($,F=>{e(_)&&F(z)})}var Me=C($,2),De=I(Me),Ge=I(De);Ge.__click=[Pt,r,D,J],M(De),M(Me),M(W),M(o),ie(()=>{Xt(b,`aspect-ratio: ${e(r).size[0]}/${e(r).size[1]};`),oe(B,"src",e(r).url)}),te(3,B,()=>ce,()=>({delay:60})),K(a,o)};se(qe,a=>{e(r)&&a(Je)})}M(ue);var Ie=C(ue,2);{var Ke=a=>{var o=jt(),u=I(o),b=I(u),x=I(b),T=I(x);T.__click=[Bt,r,P,le,ve,w],M(x),M(b),M(u),M(o),te(3,o,()=>ce,()=>({delay:60})),K(a,o)};se(Ie,a=>{e(r)&&e(_)&&a(Ke)})}var de=C(Ie,2);be(de,a=>c(i,a),()=>e(i));var Qe=C(de,2);be(Qe,a=>c(le,a),()=>e(le)),Yt(de,()=>e(n),a=>c(n,a)),K(t,Re),Dt()}yt(["click"]);export{ia as component};
